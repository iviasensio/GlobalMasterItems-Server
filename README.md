# Global Master Items for Qlik Sense - Server side

This is the server side (backend) Nodejs module that enables a REST API for the ***GlobalMasterItems extension*** for Qlik Sense available in this repository (https://github.com/iviasensio/GlobalMasterItems-Library).

### DEPENDENCIES

* The data (measures) is stored in files using NeDB (https://github.com/louischatriot/nedb) which is an embedded persistent or in memory database for NodeJs. Its API is a subset of MongoDB's and it's plenty fast!!

## REST-API endpoints

Measure object definition:
```
    {
    	_id: "string"               // Autogenerated by neDB
        expression: "string"        // Measure expression
        created: "date",            // Ej: "2017-04-18T10:33:53.506Z"
        label: "string",            // Main title
        labeldyn: "string",         // Dynamic title - optional
        user: "string",             // User who wrote this message
        desc: "string",             // Description - optional
        tag: "string",              // Tag - optional
        color: "string"             // Color - optional - hex format
    }
```


Retrieve all measures attached to a tag or label
```
    GET - https://HOSTNAME:8200/api/measures?tag=TAG;&label=LABEL
```
Add a new measure
```
    POST - https://HOSTNAME:8200/api/measures
```
Update a specific measure
```
    POST - https://HOSTNAME:8200/api/measures/:id
```
Delete a specific measure
```
    DELETE - https://HOSTNAME:8200/api/measures/:id
```

## Installation of this module

* Launch PowerShell in Administrator mode (right-click and select Run As Administrator)
* Create and change directory to an empty directory, i.e. C:\TempGMIL

```powershell
    mkdir \TempGMIL; cd \TempGMIL
```

* Enter the below command exactly as it is (including parentheses):

```powershell
    (Invoke-WebRequest "https://raw.githubusercontent.com/iviasensio/GlobalMasterItems-Server/master/setup.ps1" -OutFile setup.ps1) | .\setup.ps1
```

This will download and execute the setup script.

When the downloading and installation of the modules including their dependencies are finished you will be prompted for some configuration options.

```
Enter (HTTPS) port [8200]:
Enter (HTTP) port [8202]:
```

- ***port***: *This is the port where the server will be running on*





